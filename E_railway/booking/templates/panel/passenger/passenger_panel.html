{% extends 'panel/base/base_passenger.html' %}

{% load static %}

{% block title %}
    e-Railway - Passenger Dashboard
{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <style>
        .dashboard-header {
            background-image: url('{% static "images/railway-bg.jpg" %}');
            background-size: cover;
            padding: 60px;
            color: #fff;
            text-align: center;
        }
        .widget {
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-radius: 10px;
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-10px);
        }
        .call-to-action {
            background-color: #343a40;
            color: #fff;
            padding: 40px;
            text-align: center;
            border-radius: 8px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        .cta-button {
            padding: 10px 20px;
            background-color: #28a745;
            color: white;
            border-radius: 50px;
            border: none;
            transition: background-color 0.3s ease-in-out;
        }
        .cta-button:hover {
            background-color: #218838;
        }
        /* Google Map styling */
        #map {
            height: 400px;
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        /* Responsive styles */
        @media (max-width: 768px) {
            .dashboard-header {
                padding: 30px;
            }
            .call-to-action {
                padding: 20px;
            }
            .cta-button {
                padding: 8px 16px;
            }
            .widget {
                margin: 10px 0;
            }
        }
    </style>
{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="dashboard-header">
        <h1 class="animate__animated animate__fadeInDown">Welcome {{ user.username }}, To Your e-Railway Dashboard</h1>
        <p class="animate__animated animate__fadeInUp">Manage your trips, bookings, and services with ease.</p>
    </div>

    <div class="dashboard-content container mt-4">
        <div class="row">
            <!-- Travel Stats Widget -->
            <div class="col-lg-12 mb-4">
                <div class="stat-widget text-center animate__animated animate__fadeIn">
                    <h5><i class="fas fa-train"></i> Travel Statistics</h5>
                    <p>Track your travel history and upcoming journeys.</p>
                    <canvas id="travelStatsChart" height="100"></canvas>
                </div>
            </div>

            <!-- Ticket Booking -->
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card widget animate__animated animate__fadeInLeft" data-aos="fade-right">
                    <div class="card-header">
                        <h5><i class="fas fa-ticket-alt"></i> Ticket Booking</h5>
                    </div>
                    <div class="card-body">
                        <ul>
                            <li>Book and manage your train tickets.</li>
                            <li>View booking history.</li>
                        </ul>
                        <img src="{% static 'image/ticket.png' %}" alt="Ticket Booking" class="img-fluid">
                    </div>
                </div>
            </div>

            <!-- Train Schedule -->
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card widget animate__animated animate__fadeInRight" data-aos="fade-left">
                    <div class="card-header">
                        <h5><i class="fas fa-clock"></i> Train Schedule</h5>
                    </div>
                    <div class="card-body">
                        <ul>
                            <li>Check real-time train schedules.</li>
                            <li>Get notifications for delays or changes.</li>
                        </ul>
                        <img src="{% static 'image/training.jpeg' %}" alt="Train Schedule" class="img-fluid">
                    </div>
                </div>
            </div>

            <!-- Customer Support -->
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card widget animate__animated animate__fadeInLeft" data-aos="fade-right">
                    <div class="card-header">
                        <h5><i class="fas fa-comments"></i> Customer Support</h5>
                    </div>
                    <div class="card-body">
                        <ul>
                            <li>Reach out for inquiries or assistance.</li>
                            <li>Chat with support representatives.</li>
                        </ul>
                        <img src="{% static 'image/support.jpeg' %}" alt="Customer Support" class="img-fluid">
                    </div>
                </div>
            </div>

            <!-- Profile Management -->
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card widget animate__animated animate__fadeInRight" data-aos="fade-left">
                    <div class="card-header">
                        <h5><i class="fas fa-user"></i> Profile Management</h5>
                    </div>
                    <div class="card-body">
                        <ul>
                            <li>Update your personal information.</li>
                            <li>Manage payment methods and preferences.</li>
                        </ul>
                        <img src="{% static 'image/profile-management.jpeg' %}" alt="Profile Management" class="img-fluid">
                    </div>
                </div>
            </div>

            <!-- Promotions -->
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card widget animate__animated animate__fadeInLeft" data-aos="fade-right">
                    <div class="card-header">
                        <h5><i class="fas fa-bullhorn"></i> Promotions</h5>
                    </div>
                    <div class="card-body">
                        <ul>
                            <li>Check for ongoing discounts and offers.</li>
                            <li>Subscribe for exclusive deals.</li>
                        </ul>
                        <img src="{% static 'image/promotions.jpeg' %}" alt="Promotions" class="img-fluid">
                    </div>
                </div>
            </div>

            <!-- Railway Table -->
            <div class="col-md-12 mb-4">
                <div class="card widget">
                    <div class="card-header">
                        <h5><i class="fas fa-train"></i> Railways in Cameroon</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">Railway Name</th>
                                    <th scope="col">Location</th>
                                    <th scope="col">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Cameroon Railway</td>
                                    <td>Yaoundé</td>
                                    <td>Operational</td>
                                </tr>
                                <tr>
                                    <td>Douala Railway</td>
                                    <td>Douala</td>
                                    <td>Operational</td>
                                </tr>
                                <tr>
                                    <td>Bertoua Railway</td>
                                    <td>Bertoua</td>
                                    <td>Under Construction</td>
                                </tr>
                                <tr>
                                    <td>Garoua Railway</td>
                                    <td>Garoua</td>
                                    <td>Operational</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Google Map -->
            <div class="col-md-12 mb-4">
                <div class="card widget">
                    <div class="card-header">
                        <h5><i class="fas fa-map-marker-alt"></i> Nearest Railway Location</h5>
                    </div>
                    <div class="card-body">
                        <div id="map"></div>
                    </div>
                </div>
            </div>

            <!-- Call to Action -->
            <div class="col-md-12 mb-4">
                <div class="call-to-action animate__animated animate__bounceIn" data-aos="fade-up">
                    <h2>Ready to Travel?</h2>
                    <p>Explore our services and book your next journey.</p>
                    <button class="cta-button">Book Now</button>
                </div>
            </div>

            <!-- Copyright Section -->
            <div class="col-md-12 text-center mt-4">
                <p class="copyright">© 2024 e-Railway. All rights reserved.</p>
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAOVYRIgupAurZup5y1PRh8Ismb1A3lLao&libraries=places&callback=initMap"></script>
    <script>
        // Chart for travel statistics
        const ctx = document.getElementById('travelStatsChart').getContext('2d');
        const travelStatsChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['January', 'February', 'March', 'April', 'May'],
                datasets: [{
                    label: 'Trips Taken',
                    data: [5, 8, 12, 7, 10],
                    borderColor: 'rgba(75, 192, 192, 1)',
                    fill: false
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // AOS animation initialization
        AOS.init({
            duration: 1200,
            once: true,
        });

        // Initialize Google Map
        function initMap() {
            const location = { lat: 4.0511, lng: 9.7085 }; // Example coordinates for Douala
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: location
            });
            const marker = new google.maps.Marker({
                position: location,
                map: map
            });
        }

        // Call initMap to display the map
        initMap();
    </script>
{% endblock %}